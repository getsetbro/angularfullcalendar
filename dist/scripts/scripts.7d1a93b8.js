"use strict";angular.module("angularfullcalendarApp",["ngCookies","ngResource","ngRoute","ngSanitize","ui.calendar"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/myroute",{templateUrl:"views/myroute.html",controller:"MyrouteCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("angularfullcalendarApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("angularfullcalendarApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("angularfullcalendarApp").controller("MyrouteCtrl",["$scope","$compile","uiCalendarConfig",function(a,b,c){var d=new Date,e=d.getDate(),f=d.getMonth(),g=d.getFullYear();a.events=[{title:"All Day Event",start:new Date(g,f,1)},{title:"Long Event",start:new Date(g,f,e-5),end:new Date(g,f,e-2)},{id:999,title:"Repeating Event",start:new Date(g,f,e-3,16,0),allDay:!1},{id:999,title:"Repeating Event",start:new Date(g,f,e+4,16,0),allDay:!1},{title:"Birthday Party",start:new Date(g,f,e+1,19,0),end:new Date(g,f,e+1,22,30),allDay:!1},{type:"party",title:"Lunch",start:new Date(g,f,e,12,0),end:new Date(g,f,e,14,0),allDay:!1},{type:"party",title:"Lunch 2",start:new Date(g,f,e,12,0),end:new Date(g,f,e,14,0),allDay:!1},{type:"party",title:"Click for Google",start:new Date(g,f,28),end:new Date(g,f,29),url:"http://google.com/"}],a.eventSources2=[a.events],a.uiConfig={calendar:{droppable:!0,drop:function(a){console.log("Dropped on "+a.format())},height:450,editable:!0,header:{left:"basicDay agendaDay agendaFourDay",center:"",right:"title"},eventClick:a.alertOnEventClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender,defaultView:"agendaFourDay",views:{basic:{},agenda:{},week:{},day:{},agendaFourDay:{type:"agenda",duration:{days:4},buttonText:"4 day"}}}},a.alertOnEventClick=function(b){a.alertMessage=b.title+" was clicked "},a.alertOnDrop=function(b,c){a.alertMessage="Event Droped to make dayDelta "+c},a.alertOnResize=function(b,c){a.alertMessage="Event Resized to make dayDelta "+c},a.addEvent=function(){a.events.push({title:"Open Sesame",start:new Date(g,f,28),end:new Date(g,f,29),className:["openSesame"]})},a.remove=function(b){a.events.splice(b,1)},a.changeView=function(a,b){c.calendars[b].fullCalendar("changeView",a)},a.renderCalender=function(a){c.calendars[a]&&c.calendars[a].fullCalendar("render")},a.eventRender=function(c,d){d.attr({tooltip:c.title,"tooltip-append-to-body":!0}),b(d)(a)}}]),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$timeout","$locale",function(a,b,c){var d=1,e=1,f=a.eventSources,g=a.calendarWatchEvent?a.calendarWatchEvent:angular.noop,h=function(a){var c;return a&&(c=function(){var c=arguments,d=this;b(function(){a.apply(d,c)})}),c};this.eventsFingerprint=function(a){return a._id||(a._id=e++),""+a._id+(a.id||"")+(a.title||"")+(a.url||"")+(+a.start||"")+(+a.end||"")+(a.allDay||"")+(a.className||"")+g(a)||""},this.sourcesFingerprint=function(a){return a.__id||(a.__id=d++)},this.allEvents=function(){for(var a=[],b=0,c=f.length;c>b;b++){var d=f[b];if(angular.isArray(d))a.push(d);else if(angular.isObject(d)&&angular.isArray(d.events)){var e={};for(var g in d)"_uiCalId"!==g&&"events"!==g&&(e[g]=d[g]);for(var h=0;h<d.events.length;h++)angular.extend(d.events[h],e);a.push(d.events)}}return Array.prototype.concat.apply([],a)},this.changeWatcher=function(a,b){var c,d=function(){for(var c,d,e=angular.isFunction(a)?a():a,g=[],h=0,i=e.length;i>h;h++)d=e[h],c=b(d),f[c]=d,g.push(c);return g},e=function(a,b){var c,d,e=[],f={};for(c=0,d=b.length;d>c;c++)f[b[c]]=!0;for(c=0,d=a.length;d>c;c++)f[a[c]]||e.push(a[c]);return e},f={},g=function(a,d){var g,h,i,j,k={},l=e(d,a);for(g=0,h=l.length;h>g;g++){var m=l[g];i=f[m],delete f[m];var n=b(i);n===m?c.onRemoved(i):(k[n]=m,c.onChanged(i))}var o=e(a,d);for(g=0,h=o.length;h>g;g++)j=o[g],i=f[j],k[j]||c.onAdded(i)};return c={subscribe:function(a,b){a.$watch(d,function(a,c){b&&b(a,c)===!1||g(a,c)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(a,b){var c={};return angular.extend(c,b),angular.extend(c,a),angular.forEach(c,function(a,b){"function"==typeof a&&(c[b]=h(c[b]))}),c},this.getLocaleConfig=function(a){if(!a.lang||a.useNgLocale){var b=function(a){var b,c;b=[];for(c in a)b[c]=a[c];return b},d=c.DATETIME_FORMATS;return{monthNames:b(d.MONTH),monthNamesShort:b(d.SHORTMONTH),dayNames:b(d.DAY),dayNamesShort:b(d.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(a){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(b,c,d,e){function f(){var c,f=d.uiCalendar?b.$parent.$eval(d.uiCalendar):{};c=e.getFullCalendarConfig(f,a);var g=e.getLocaleConfig(c);angular.extend(g,c),l={eventSources:h},angular.extend(l,g),l.calendars=null;var i={};for(var j in l)"eventSources"!==j&&(i[j]=l[j]);return JSON.stringify(i)}var g,h=b.eventSources,i=!1,j=e.changeWatcher(h,e.sourcesFingerprint),k=e.changeWatcher(e.allEvents,e.eventsFingerprint),l=null;b.destroy=function(){g&&g.fullCalendar&&g.fullCalendar("destroy"),g=d.calendar?a.calendars[d.calendar]=$(c).html(""):$(c).html("")},b.init=function(){g.fullCalendar(l)},j.onAdded=function(a){g.fullCalendar("addEventSource",a),i=!0},j.onRemoved=function(a){g.fullCalendar("removeEventSource",a),i=!0},k.onAdded=function(a){g.fullCalendar("renderEvent",a)},k.onRemoved=function(a){g.fullCalendar("removeEvents",function(b){return b._id===a._id})},k.onChanged=function(a){a._start=$.fullCalendar.moment(a.start),a._end=$.fullCalendar.moment(a.end),g.fullCalendar("updateEvent",a)},j.subscribe(b),k.subscribe(b,function(){return i===!0?(i=!1,!1):void 0}),b.$watch(f,function(){b.destroy(),b.init()})}}}]);